platform :ios, '13.0'
use_frameworks!
inhibit_all_warnings!

target 'ArboreUi' do
  # --- Firebase (versions modernes) ---
  pod 'FirebaseAuth',        '~> 11.15'
  pod 'FirebaseFirestore',   '~> 11.15'
  # Analytics (optionnel). Prends la version sans Ad ID pour éviter AppTrackingTransparency si tu n’en as pas besoin.
  # pod 'FirebaseAnalyticsWithoutAdIdSupport', '~> 11.15'

  # --- Google Sign-In ---
  pod 'GoogleSignIn', '~> 7.0'
  # Si tu utilises vraiment les helpers Swift UI :
  pod 'GoogleSignInSwift', '~> 0.3'

  # --- Facebook Login ---
  pod 'FacebookLogin', '~> 18.0'   # remplace l’ancien FBSDKLoginKit

  # Ces dépendances transitives ne sont PAS nécessaires à déclarer à la main :
  # ❌ GTMSessionFetcher/Core
end

# post_install minimal et sûr
post_install do |installer|
  installer.pods_project.targets.each do |t|
    t.build_configurations.each do |config|
      config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '13.0'
      # Si simulateur Apple Silicon pose souci, décommente :
      # config.build_settings["EXCLUDED_ARCHS[sdk=iphonesimulator*]"] = "arm64"
    end
  end
end
